extends ../../layouts/default.pug
include ../../mixins/filterButton.pug
include ../../mixins/searchByKeyword.pug
include ../../mixins/pagination.pug
include ../../mixins/formChangeMulti.pug
include ../../mixins/alert.pug
block main 
 if(roleAccount.permissions.includes("product-category-delete"))
  h1 Danh sach danh mục san pham bị xóa
    +alert-success(3000)
    .card.mb-3 
    .card-header Bộ lọc và tìm kiếm 
    .card-body 
      .row 
        .col-7 
          //-Tối ưu filter button
          +filterButton(filterButtons)
        .col-5 
          //-Tối ưu searchByKeyword
          +searchByKeyword(keywordSearch)


    .card.mb-3 
    .card-header Danh sách sản phẩm
      .card-body 
      .row 
          .col-6
              +formChangeMulti(`${prefixAdmin}/products/change-multi?_method=PATCH`)  
          .col-6 
              a(
                href=`${prefixAdmin}/product-category`
                class="d-flex justify-content-end"
              )
               button(class="btn btn-dark btn-sm") Quay trở lại danh sách danh mục sản phẩm
      table(
        class="table table-hover table-sm"
        check-box-multi
      )
        thead 
              tr 
                th 
                  input(type="checkbox" name="checkall")
                th STT 
                th Hình ảnh 
                th Tiêu đề
                th Trạng thái 
                th Hành động
        tbody 
            each item, index in productCategoryList
             tr 
                td 
                  input(type="checkbox" name="id" value=item.id)
                td #{index+1}
                td 
                    img(src=item.thumbnail
                        alt=item.title
                        width="100px"
                        height="auto"
                        )
                td #{item.title}
                td 
                    if(item.status=="active")
                        a(href="javascript:;"
                          data-status=item.status
                          data-id=item.id
                          button-change-status
                          class="badge badge-success") Hoạt động
                    else 
                        a(href="javascript:;"
                        data-status=item.status
                        data-id=item.id
                        button-change-status
                        class="badge badge-danger") Dừng hoạt động   
                td 
                  if(roleAccount.permissions.includes("product-category-delete"))
                    button(
                      class="btn btn-warning btn-sm"
                      data-id=item.id
                      button-productCategory-recover
                      ) Phục hồi
                  if(roleAccount.permissions.includes("product-category-delete"))    
                    button(
                      class="btn btn-danger btn-sm ml-1"
                      data-id=item.id
                      button-delete-productCategory-permently
                      ) Xóa vĩnh viễn     
    //-Tối ưu pagination
    +pagination(objectPagination)    

    form(
      action=""
      method="Post"
      id="formRecoverCategory"
      path=`${prefixAdmin}/product-category/recoverProduct`
    )

    form(
      action=""
      method="POST"
      id="formDeleteCategory"
      path=`${prefixAdmin}/product-category/deletePermanently`
    )
    script(src="/admin/js/products.js")                    