extends ../../layouts/default.pug
include ../../mixins/filterButton.pug
include ../../mixins/searchByKeyword.pug
include ../../mixins/pagination.pug
include ../../mixins/formChangeMulti.pug
block main 
 h1 Danh sach san pham
 
  .card.mb-3 
   .card-header Bộ lọc và tìm kiếm 
   .card-body 
    .row 
      .col-7 
         //-Tối ưu filter button
         +filterButton(filterButtons)
      .col-5 
         //-Tối ưu searchByKeyword
         +searchByKeyword(keywordSearch)


  .card.mb-3 
   .card-header Danh sách sản phẩm
    .card-body 
     +formChangeMulti(`${prefixAdmin}/products/change-multi?_method=PATCH`)  
     table(
       class="table table-hover table-sm"
       check-box-multi
     )
      thead 
            tr 
              th 
                input(type="checkbox" name="checkall")
              th STT 
              th Hình ảnh 
              th Tiêu đề
              th Giá
              th Trạng thái 
              th Hành động
      tbody 
          each item, index in products
           tr 
              td 
                input(type="checkbox" name="id" value=item.id)
              td #{index+1}
              td 
                  img(src=item.thumbnail
                      alt=item.title
                      width="100px"
                      height="auto"
                      )
              td #{item.title}
              td #{item.price} $
              td 
                  if(item.status=="active")
                      a(href="javascript:;"
                        data-status=item.status
                        data-id=item.id
                        button-change-status
                        class="badge badge-success") Hoạt động
                  else 
                      a(href="javascript:;"
                      data-status=item.status
                      data-id=item.id
                      button-change-status
                      class="badge badge-danger") Dừng hoạt động   
              td 
                  button(class="btn btn-warning btn-sm") Sửa
                  button(class="btn btn-danger btn-sm ml-1") Xóa     
  //-Tối ưu pagination
  +pagination(objectPagination)    

  form(
    action=""
    method="Post"
    id="formChangeStatus"
    path=`${prefixAdmin}/products/change-product-status`
  )
  script(src="/admin/js/products.js")                    